\hypertarget{gt__http_8h}{
\section{gt\_\-http.h File Reference}
\label{gt__http_8h}\index{gt\_\-http.h@{gt\_\-http.h}}
}


GuardTime client SDK, public header file for HTTP transport module.  


{\ttfamily \#include \char`\"{}gt\_\-base.h\char`\"{}}\par
{\ttfamily \#include $<$stddef.h$>$}\par
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__http_gacf85f4c0d316a03db66a8ef24ddf3411}{GTHTTP\_\-VERSION}~(0 $<$$<$ 24 $|$ 3 $<$$<$ 16 $|$ 8)
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__http_ga9f42032eb2905e40ee6fe84e0dfc03c2}{GTHTTPStatusCode} \{ \par
\hyperlink{group__http_gga9f42032eb2905e40ee6fe84e0dfc03c2a26adede81bf1a9366ba5c694071e7f7c}{GTHTTP\_\-HTTP\_\-LIMIT} =  0x1000, 
\par
\hyperlink{group__http_gga9f42032eb2905e40ee6fe84e0dfc03c2a196935519731c1937ef788ec01bf8e36}{GTHTTP\_\-HTTP\_\-BASE} =  GTHTTP\_\-LOWEST, 
\par
\hyperlink{group__http_gga9f42032eb2905e40ee6fe84e0dfc03c2a85676a04ec8467d5f486dbbb33b63a79}{GTHTTP\_\-IMPL\_\-BASE} =  GTHTTP\_\-HTTP\_\-BASE + GTHTTP\_\-HTTP\_\-LIMIT
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__http_gadab3f065f857d5187ab911da1c5c6978}{GTHTTP\_\-init} (const char $\ast$user\_\-agent, int init\_\-winsock)
\item 
void \hyperlink{group__http_gaf4f64a13a6af9a162dfc39c011c2f812}{GTHTTP\_\-finalize} (void)
\item 
const char $\ast$ \hyperlink{group__http_ga3df4ff0f34f540e640e0cc2b7610d921}{GTHTTP\_\-getErrorString} (int error)
\item 
int \hyperlink{group__http_gaf8fed890ccd3245cc91dcf656f969f6f}{GTHTTP\_\-getVersion} (void)
\item 
void \hyperlink{group__http_gae918254645884f0dedd5960980c1c632}{GTHTTP\_\-setConnectTimeout} (int timeout)
\item 
int \hyperlink{group__http_gafc28fbcfb83b8ca6a82053e6bcbcbc04}{GTHTTP\_\-getConnectTimeout} (void)
\item 
void \hyperlink{group__http_ga2144f61afab48c756df3441da928c53e}{GTHTTP\_\-setResponseTimeout} (int timeout)
\item 
int \hyperlink{group__http_ga5265b911e2549b97bf67979fe8026098}{GTHTTP\_\-getResponseTimeout} (void)
\item 
int \hyperlink{group__http_gad6158faeb4747293308cffe102bd9b2d}{GTHTTP\_\-sendRequest} (const char $\ast$url, const unsigned char $\ast$request, size\_\-t request\_\-length, unsigned char $\ast$$\ast$response, size\_\-t $\ast$response\_\-length, char $\ast$$\ast$error)
\item 
int \hyperlink{group__http_ga4e3e8302dd412eed484c83f600006dca}{GTHTTP\_\-createTimestampHash} (const \hyperlink{struct_g_t_message_digest__st}{GTDataHash} $\ast$hash, const char $\ast$url, \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$$\ast$timestamp)
\item 
int \hyperlink{group__http_ga5567c03e03f48709c529dfb323d92a96}{GTHTTP\_\-createTimestampData} (const unsigned char $\ast$data, size\_\-t data\_\-len, const char $\ast$url, \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$$\ast$timestamp)
\item 
int \hyperlink{group__http_gaaad2bfa8db7c4770116197d50fb73b76}{GTHTTP\_\-extendTimestamp} (const \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$ts\_\-in, const char $\ast$url, \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$$\ast$ts\_\-out)
\item 
int \hyperlink{group__http_ga29c56b103ec317445b65f4ed80028313}{GTHTTP\_\-verifyTimestampHash} (const \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$ts, const \hyperlink{struct_g_t_message_digest__st}{GTDataHash} $\ast$hash, const char $\ast$ext\_\-url, \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$$\ast$ext\_\-ts, const \hyperlink{group__publications_gacf561fdbce4067eb94bd9761a71e7e5a}{GTPublicationsFile} $\ast$pub, const char $\ast$pub\_\-url, int parse, \hyperlink{struct_g_t_verification_info__st}{GTVerificationInfo} $\ast$$\ast$ver)
\item 
int \hyperlink{group__http_gab5486f6fb276f651ced2fa029bace0f2}{GTHTTP\_\-verifyTimestampData} (const \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$ts, const unsigned char $\ast$data, size\_\-t data\_\-len, const char $\ast$ext\_\-url, \hyperlink{group__timestamps_gaddb792efe52216386853c94e7aeaf6ba}{GTTimestamp} $\ast$$\ast$ext\_\-ts, const \hyperlink{group__publications_gacf561fdbce4067eb94bd9761a71e7e5a}{GTPublicationsFile} $\ast$pub, const char $\ast$pub\_\-url, int parse, \hyperlink{struct_g_t_verification_info__st}{GTVerificationInfo} $\ast$$\ast$ver)
\item 
int \hyperlink{group__http_gaa699442dc8eac0be397048e9287e7101}{GTHTTP\_\-getPublicationsFile} (const char $\ast$url, \hyperlink{group__publications_gacf561fdbce4067eb94bd9761a71e7e5a}{GTPublicationsFile} $\ast$$\ast$pub)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This module offers the functions to communicate with the GuardTime network over the HTTP protocol.

The three main functions are:
\begin{DoxyItemize}
\item creating a timestamp (the resulting PKI-\/signed timestamp can be verified using the GuardTime public key certificate);
\item extending a timestamp (the resulting hash-\/linked timestamp can be verified independently from GuardTime for unlimited time);
\item verifying a timestamp; the following diagram illustrates the decision process:  
\begin{DoxyImageNoCaption}
  \mbox{\includegraphics[width=15cm]{ApiVerifyTimestamp}}
\end{DoxyImageNoCaption}

\end{DoxyItemize}

\subsubsection*{Usage}

{\bfseries Linux}

The networking functions in this module rely on cURL. The use of the cURL code is covered by the license available online from \href{http://curl.haxx.se/docs/copyright.html}{\tt curl.haxx.se/docs/copyright.html} and also enclosed in the file {\ttfamily licence.curl.txt}.

Multi-\/platform source code for cURL can be dowloaded from \href{http://curl.haxx.se/}{\tt curl.haxx.se}. This version of the GuardTime SDK has been tested with cURL 7.18.1.

Although it's not difficult to compile cURL on Linux, most distributions also provide prebuilt binaries through their normal package management facilities. When installing a prebuilt package, make sure you pick a \char`\"{}developer\char`\"{} version, otherwise you may only get the tools and utilities, but no libraries or headers.

To compile a program that uses both the HTTP module and GuardTime base API, use a command along the lines of 
\begin{DoxyCode}
    gcc example.c -o example -I/usr/local/gt/include \
    -L/usr/local/gt/lib -L/usr/local/curl/lib -L/usr/local/ssl/lib \
    -lgthttp -lgtbase -lcurl -lcrypto -lrt
\end{DoxyCode}
 (either with the backslashes or all on a single line) replacing {\ttfamily /usr/local/gt}, {\ttfamily /usr/local/curl} and {\ttfamily /usr/local/ssl} with the directories where you unpacked the GuardTime, cURL and OpenSSL libraries.

{\bfseries Windows}

The networking functions in this module rely on WinINet, which comes standard on all supported versions of Windows.

To compile a program that uses both the HTTP module and GuardTime base API, use a command along the lines of 
\begin{DoxyCode}
    cl.exe /MT example.c /I C:\gt\include
    /link /libpath:C:\gt\lib /libpath:C:\openssl\lib
    libgthttpMT.lib libgtbaseMT.lib libeay32MT.lib wininet.lib
    wsock32.lib wldap32.lib winmm.lib user32.lib gdi32.lib advapi32.lib
\end{DoxyCode}
 (all on a single line) replacing {\ttfamily C:$\backslash$gt} and {\ttfamily C:$\backslash$openssl} with the directories where you unpacked the GuardTime and OpenSSL libraries.

When compiling, keep in mind that mixing code compiled with different {\ttfamily /Mxx} settings is dangerous. It's best to always use the GuardTime and OpenSSL libraries that match the {\ttfamily /Mxx} setting you specified for compiling your own source code. 